<% console.log(roomList) %>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title><%=flat? flat.name: 'FLAT NOT FOUND'%></title>
  </head>

  <body>
    <a href="../..">Home</a>
    <% if(flat) { %>
    <h1>Name: <%=flat.name%></h1>
    <h1>Address: <%=flat.address%></h1>
    <h1>For <%=flat.gender? 'Bachelors' : 'Bachelorettes' %></h1>
    <h1>Level: <%=flat.level%></h1>
    <h1>
      Owner:
      <a href="../../owner/profile/<%=flat.owner%>"> <%=owner.name%> </a>
    </h1>
    <h1>Lift: <%=flat.lift? 'YES' : 'NO' %></h1>
    <h1>Generator: <%=flat.generator? 'YES' : 'NO' %></h1>
    <h1>Rooms</h1>
    <ul>
      <% roomList.forEach(room => { %>
      <li>
        <a href="../../room/profile/<%= room.roomID %> "
          ><h2><%= room.name %></h2></a
        >
      </li>
      <% }) %>
    </ul>
    <% if(currentUser===flat.owner) { %>
    <button>
      <a href="../edit/<%=flat.flatID%>">Edit Info</a>
    </button>
    <button>
      <a href="#">Add Rooms</a>
    </button>
    <% } else if (mode==='student') { %> <%# if (student.flatID===null) { %>
    <form action="request" method="post">
      <input type="hidden" name="studentID" value="<%= currentUser %>" />
      <input type="hidden" name="flatID" value="<%= flat.flatID %>" />
      <button>Request Reservation</button>
    </form>
    <%# } %> <% } %> <% } else { %>
    <p>FLAT NOT FOUND!</p>
    <% } %>
  </body>
</html>
